COPY	START	0
.	MACRO TO READ INPUT
.	
.	MACRO TO WRITE OUTPUT
.
.
.	MAIN
.
FIRST	STL	RETADR
.	.
		
	CLEAR	X
		
	CLEAR	A
		
	CLEAR	S
		
	+LDT	#4096
		
	TD	=X'?INDEV'
		
	JEQ	*-3
		
	RD	=X'?INDEV'
		
	COMPR	A,S
		
	JEQ	*+11
		
	STCH	?BUFADR,X
		
	TIXR	T
		
	JLT	*-19
		
	STX	?RECLTH
		
	MEND	
	LDA	LENGTH
	COMP	#0
	JEQ	ENDFIL
.	.
		
	CLEAR	X
		
	CLEAR	A
		
	CLEAR	S
		
	+LDT	#4096
		
	TD	=X'?INDEV'
		
	JEQ	*-3
		
	RD	=X'?INDEV'
		
	COMPR	A,S
		
	JEQ	*+11
		
	STCH	?BUFADR,X
		
	TIXR	T
		
	JLT	*-19
		
	STX	?RECLTH
		
	MEND	
	J	CLOOP
.	.
		
	CLEAR	X
		
	CLEAR	A
		
	CLEAR	S
		
	+LDT	#4096
		
	TD	=X'?INDEV'
		
	JEQ	*-3
		
	RD	=X'?INDEV'
		
	COMPR	A,S
		
	JEQ	*+11
		
	STCH	?BUFADR,X
		
	TIXR	T
		
	JLT	*-19
		
	STX	?RECLTH
		
	MEND	
	J	@RETADR
EOF	BYTE	C'EOF'
THREE	WORD	3
RETADR	RESW	1
LENGTH	RESW	1
BUFFER	RESB	4096
	END	FIRST
		
