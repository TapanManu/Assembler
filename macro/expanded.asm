COPY	START	0
.	MACRO TO READ INPUT
.	
.	MACRO TO WRITE OUTPUT
.
.
.	MAIN
.
FIRST	STL	RETADR
.	RDBUFF MACRO &INDEV,&BUFADR,&RECLTH.
	CLEAR	X
	CLEAR	A
	CLEAR	S
	+LDT	#4096
TD	=X'?1	'
	JEQ	*-3
RD	=X'?1	'
	COMPR	A,S
	JEQ	*+11
STCH	?2	,X
	TIXR	T
	JLT	*-19
	STX	?3
	LDA	LENGTH
	COMP	#0
	JEQ	ENDFIL
.	WRBUFF MACRO &OUTDEV,&BUFADR,&RECLTH.
	CLEAR	X
	LDT	?3
LDCH	?2	,X
TD	=X'?1	'
	JEQ	*-3
WD	=X'?1	'
	TIXR	T
	JLT	*-14
	J	CLOOP
.	WRBUFF MACRO &OUTDEV,&BUFADR,&RECLTH.
	CLEAR	X
	LDT	?3
LDCH	?2	,X
TD	=X'?1	'
	JEQ	*-3
WD	=X'?1	'
	TIXR	T
	JLT	*-14
	J	@RETADR
EOF	BYTE	C'EOF'
THREE	WORD	3
RETADR	RESW	1
LENGTH	RESW	1
BUFFER	RESB	4096
	END	FIRST
		
